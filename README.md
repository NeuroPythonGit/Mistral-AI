# Mistral AI Ассистент

Этот проект содержит две версии голосового AI ассистента: веб-интерфейс (`app.py`) и Telegram бот (`main.py`). Оба приложения используют Whisper для распознавания речи, Mistral AI для генерации текста и Google Text-to-Speech для синтеза голоса.

## Подготовка к работе

1. Установите необходимые зависимости:
```bash
pip install -r requirements.txt
```

2. Создайте файл `.env` в корневой директории со следующими переменными:
```
MISTRAL_API_KEY=ваш_ключ_mistral_api
BOT_TOKEN=ваш_токен_telegram_бота  # Нужен только для main.py
```

## Веб-версия (app.py)

Веб-версия предоставляет пользовательский интерфейс на базе Gradio для голосового взаимодействия с AI ассистентом.

### Возможности
- Запись голоса в реальном времени
- Преобразование речи в текст с помощью Whisper
- Генерация ответов с использованием Mistral AI
- Преобразование текста в речь с помощью Google TTS

### Запуск
```bash
python app.py
```
Веб-интерфейс будет доступен по адресу `http://localhost:7860`

### Использование
1. Нажмите на кнопку микрофона для начала записи
2. Произнесите ваше сообщение
3. Нажмите еще раз для остановки записи
4. Дождитесь ответа AI
5. Ответ будет автоматически воспроизведен

## Telegram Бот (main.py)

Версия Telegram бота позволяет взаимодействовать с AI ассистентом через голосовые сообщения в Telegram.

### Возможности
- Обработка голосовых сообщений в Telegram
- Преобразование голосовых сообщений в текст с помощью Whisper
- Генерация ответов с использованием Mistral AI
- Отправка как текстовых, так и голосовых ответов

### Запуск
```bash
python main.py
```

### Использование
1. Начните чат с вашим ботом в Telegram
2. Отправьте голосовое сообщение
3. Бот:
   - Преобразует ваше сообщение в текст
   - Сгенерирует AI ответ
   - Отправит текстовый и голосовой ответ

## Технические детали

### Обработка голоса
- Частота дискретизации: 44100 Гц
- Формат аудио: WAV
- Модель Whisper: "base" с обработкой на CPU

### AI Модель
- Использование API Mistral AI для генерации ответов
- Модель: mistral-small-latest

### Обработка ошибок
- Обе версии включают базовую обработку ошибок для:
  - Отсутствующих API ключей
  - Проблем с записью аудио
  - Проблем с подключением к сети

## Устранение неполадок

1. Если возникают ошибки с API ключами:
   - Проверьте файл `.env`
   - Убедитесь в правильности API ключей

2. Если не работает запись аудио:
   - Проверьте разрешения для микрофона
   - Убедитесь, что звуковое устройство правильно подключено

3. Для проблем с Telegram ботом:
   - Убедитесь в правильности токена бота
   - Проверьте разрешения бота в Telegram
